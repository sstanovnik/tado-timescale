# Example configuration for tado-timescale
# Each block documents the purpose of the variable, its default behaviour, and an example value.

# DATABASE_URL
# Description: TimescaleDB/Postgres connection string consumed by Diesel.
# Default: postgres://postgres:postgres@localhost:5432/tado
DATABASE_URL=postgres://postgres:postgres@localhost:5432/tado

# INITIAL_TADO_REFRESH_TOKEN
# Description: Browser-derived OAuth refresh token used for the first run when the persistence file is absent.
# Default: none (required when the persistence file does not exist)
INITIAL_TADO_REFRESH_TOKEN=replace-with-refresh-token

# TADO_REFRESH_TOKEN_PERSISTENCE_FILE
# Description: File path used to persist the rotated refresh token (relative paths resolved from the process cwd).
# Default: token.txt
TADO_REFRESH_TOKEN_PERSISTENCE_FILE=token.txt

# TADO_FIREFOX_VERSION
# Description: Firefox version embedded in the spoofed User-Agent when calling Tado.
# Default: 143.0
TADO_FIREFOX_VERSION=143.0

# REALTIME_INTERVAL_SECS
# Description: Polling cadence (in seconds) for realtime API collection.
# Default: 60
REALTIME_INTERVAL_SECS=60

# REALTIME_ENABLED
# Description: Toggle the realtime polling loop after backfill (set to false to skip).
# Default: true
REALTIME_ENABLED=true

# MAX_REQUEST_RETRIES
# Description: Number of retries to perform after a Tado server error (5xx). Failures propagate after the (retries + 1)th attempt.
# Default: 3
MAX_REQUEST_RETRIES=3

# BACKFILL_ENABLED
# Description: Toggle the historical backfill run on startup (set to false to skip).
# Default: true
BACKFILL_ENABLED=true

# BACKFILL_FROM_DATE
# Description: Optional lower bound (UTC date in YYYY-MM-DD) for historical backfill.
# Default: not set (fetches full history from Tado)
BACKFILL_FROM_DATE=2024-01-01

# BACKFILL_REQUESTS_PER_SECOND
# Description: Optional throttle for historical day-report requests (positive integer).
# Default: not set (no explicit rate limiting)
BACKFILL_REQUESTS_PER_SECOND=2

# BACKFILL_SAMPLE_RATE
# Description: Optional sampling rate for historical day reports, expressed as 1/N (collect every Nth day).
# Default: not set (collects every available day)
BACKFILL_SAMPLE_RATE=1/7

# BACKFILL_MIN_GAP_MINUTES
# Description: Minimum climate measurement gap (in minutes) that triggers historical backfill for a day.
# Default: 240 (4 hours)
BACKFILL_MIN_GAP_MINUTES=240

# RUST_LOG
# Description: Optional log filter recognised by env_logger; useful for debugging.
# Default: info
RUST_LOG=info
